<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Jobya - 添加公司信息</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="Themesdesign" />

    <link rel="shortcut icon" href="images/favicon.ico">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">

    <!--Material Icon -->
    <link rel="stylesheet" type="text/css" href="css/materialdesignicons.min.css" />

    <link rel="stylesheet" type="text/css" href="css/fontawesome.css" />

    <!-- selectize css -->
    <link rel="stylesheet" type="text/css" href="css/selectize.css" />

    <link rel="stylesheet" type="text/css" href="css/nice-select.css" />

    <!-- Custom  Css -->
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <link rel="stylesheet" type="text/css" href="css/sweetalert.css"/>

    <link rel="stylesheet" type="text/css" href="css/notiflix-2.1.2.min.css"/>

    <script src="js/ckeditor/ckeditor.js"></script>

</head>

<body>
    <!-- Loader -->
    <div id="preloader">
        <div id="status1">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
        </div>
    </div>
    <!-- Loader -->

    <!-- Navigation Bar-->
    <header id="topnav" class="defaultscroll scroll-active">
        
    </header><!--end header-->
    <!-- Navbar End -->
    
    <!-- Start home -->
    <section class="bg-half page-next-level"> 
        <div class="bg-overlay"></div>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="text-center text-white">
                        <h4 class="text-uppercase title mb-4">添加公司信息</h4>
                        <ul class="page-next d-inline-block mb-0">
                            <li><a href="index.html" class="text-uppercase font-weight-bold">首页</a></li> 
                            <li>
                                <span class="text-uppercase text-white font-weight-bold">添加公司信息</span> 
                            </li> 
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end home -->

    <!-- CREATE RESUME START -->
    <section class="section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h5 class="text-dark">基本信息 :</h5>
                </div>
 
                <div class="col-12 mt-3">
                    <div class="custom-form p-4 border rounded">
                        
                        <form id="ff" method="POST">
                            <img onclick="uploadHead.click()" id="head-image" src="images\jobya.png" style="border: 1px,solid,rgb(19, 18, 18)" class="img-fluid avatar avatar-medium d-block mx-auto rounded-pill" alt="">
                            <input type="file" name="file" style="display: none;" id="uploadHead" onchange="getFileName()"/>
                            <input type="hidden" name="head" style="display: none;" id="icon" value=""/>
                            <div class="row mt-4">
                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <input type="hidden" id="companyNo" value="" />
                                        <label class="text-muted">公司名称<span class="text-danger">*</span> :</label>
                                        <input id="name" required="true" type="text" name="name" class="form-control resume" placeholder="Name">
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">所在城市<span class="text-danger">*</span> :</label>
                                        <div class="form-button">
                                            <div class="registration-form-box">
                                                <select id="select-country" class="demo-default">
                                                    <option value="">City...</option>
                                                    <option>北京</option>
                                                    <option>天津</option>
                                                    <option>上海</option>
                                                    <option>重庆</option>
                                                    <option>石家庄</option><option>张家口</option><option>承德</option><option>秦皇岛</option><option>唐山</option><option>廊坊</option><option>保定</option><option>衡水</option><option>沧州</option><option>邢台</option><option>邯郸</option>
                                                    <option>太原</option><option>朔州</option><option>大同</option><option>阳泉</option><option>长治</option><option>晋城</option><option>忻州</option><option>晋中</option><option>临汾</option><option>吕梁</option><option>运城</option>
                                                    <option>呼和浩特</option><option>包头</option><option>乌海</option><option>赤峰</option><option>通辽</option><option>呼伦贝尔</option><option>鄂尔多斯</option><option>乌兰察布</option><option>巴彦淖尔</option><option>兴安盟</option><option>锡林郭勒盟</option><option>阿拉善盟</option><option>沈阳</option><option>朝阳</option><option>阜新</option><option>铁岭</option><option>抚顺</option><option>本溪</option><option>辽阳</option><option>鞍山</option><option>丹东</option><option>大连</option><option>营口</option><option>盘锦</option><option>锦州</option><option>葫芦岛</option><option>长春</option><option>白城</option><option>松原</option><option>吉林</option><option>四平</option><option>辽源</option><option>通化</option><option>白山</option><option>延边州</option><option>哈尔滨</option><option>齐齐哈尔</option><option>七台河</option><option>黑河</option><option>大庆</option><option>鹤岗</option><option>伊春</option><option>佳木斯</option><option>双鸭山</option><option>鸡西</option><option>牡丹江</option><option>绥化</option><option>大兴安岭</option><option>南京</option><option>徐州</option><option>连云港</option><option>宿迁</option><option>淮安</option><option>盐城</option><option>扬州</option><option>泰州</option><option>南通</option><option>镇江</option><option>常州</option><option>无锡</option><option>苏州</option><option>杭州</option><option>湖州</option><option>嘉兴</option><option>舟山</option><option>宁波</option><option>绍兴</option><option>衢州</option><option>金华</option><option>台州</option><option>温州</option><option>丽水</option><option>合肥</option><option>宿州</option><option>淮北</option><option>亳州</option><option>阜阳</option><option>蚌埠</option><option>淮南</option><option>滁州</option><option>马鞍山</option><option>芜湖</option><option>铜陵</option><option>安庆</option><option>黄山</option><option>六安</option><option>巢湖</option><option>池州</option><option>宣城</option><option>福州</option><option>南平</option><option>莆田</option><option>三明</option><option>泉州</option><option>厦门</option><option>漳州</option><option>龙岩</option><option>宁德</option><option>南昌</option><option>九江</option><option>景德镇</option><option>鹰潭</option><option>新余</option><option>萍乡</option><option>赣州</option><option>上饶</option><option>抚州</option><option>宜春</option><option>吉安</option><option>济南</option><option>青岛</option><option>聊城</option><option>德州</option><option>东营</option><option>淄博</option><option>潍坊</option><option>烟台</option><option>威海</option><option>日照</option><option>临沂</option><option>枣庄</option><option>济宁</option><option>泰安</option><option>莱芜</option><option>滨州</option><option>菏泽</option><option>郑州</option><option>开封</option><option>三门峡</option><option>洛阳</option><option>焦作</option><option>新乡</option><option>鹤壁</option><option>安阳</option><option>濮阳</option><option>商丘</option><option>许昌</option><option>漯河</option><option>平顶山</option><option>南阳</option><option>信阳</option><option>周口</option><option>驻马店</option><option>济源</option><option>武汉</option><option>十堰</option><option>襄阳</option><option>荆门</option><option>孝感</option><option>黄冈</option><option>鄂州</option><option>黄石</option><option>咸宁</option><option>荆州</option><option>宜昌</option><option>随州</option><option>仙桃</option><option>潜江</option><option>天门</option><option>神农架林区</option><option>恩施州</option><option>长沙</option><option>张家界</option><option>常德</option><option>益阳</option><option>岳阳</option><option>株洲</option><option>湘潭</option><option>衡阳</option><option>郴州</option><option>永州</option><option>邵阳</option><option>怀化</option><option>娄底</option><option>湘西州</option><option>广州</option><option>深圳</option><option>清远</option><option>韶关</option><option>河源</option><option>梅州</option><option>潮州</option><option>汕头</option><option>揭阳</option><option>汕尾</option><option>惠州</option><option>东莞</option><option>珠海</option><option>中山</option><option>江门</option><option>佛山</option><option>肇庆</option><option>云浮</option><option>阳江</option><option>茂名</option><option>湛江</option><option>南宁</option><option>桂林</option><option>柳州</option><option>梧州</option><option>贵港</option><option>玉林</option><option>钦州</option><option>北海</option><option>防城港</option><option>崇左</option><option>百色</option><option>河池</option><option>来宾</option><option>贺州</option><option>成都</option><option>广元</option><option>绵阳</option><option>德阳</option><option>南充</option><option>广安</option><option>遂宁</option><option>内江</option><option>乐山</option><option>自贡</option><option>泸州</option><option>宜宾</option><option>攀枝花</option><option>巴中</option><option>达州</option><option>资阳</option><option>眉山</option><option>雅安</option><option>阿坝州</option><option>甘孜州</option><option>凉山州</option><option>海口</option><option>三亚</option><option>文昌</option><option>琼海</option><option>万宁</option><option>五指山</option><option>东方</option><option>儋州</option><option>三沙</option><option>贵阳</option><option>六盘水</option><option>遵义</option><option>安顺</option><option>毕节</option><option>铜仁</option><option>黔东南州</option><option>黔南州</option><option>黔西南州</option><option>昆明</option><option>曲靖</option><option>玉溪</option><option>保山</option><option>昭通</option><option>丽江</option><option>思茅</option><option>临沧</option><option>德宏州</option><option>怒江州</option><option>迪庆州</option><option>大理州</option><option>楚雄州</option><option>红河州</option><option>文山州</option><option>西双版纳</option><option>拉萨</option><option>那曲</option><option>昌都</option><option>林芝</option><option>山南</option><option>日喀则</option><option>阿里</option><option>西安</option><option>延安</option><option>铜川</option><option>渭南</option><option>咸阳</option><option>宝鸡</option><option>汉中</option><option>榆林</option><option>安康</option><option>商洛</option><option>兰州</option><option>嘉峪关</option><option>白银</option><option>天水</option><option>武威</option><option>酒泉</option><option>张掖</option><option>庆阳</option><option>平凉</option><option>定西</option><option>陇南</option><option>临夏州</option><option>甘南州</option><option>西宁</option><option>海东</option><option>海北州</option><option>海南州</option><option>黄南州</option><option>果洛州</option><option>玉树州</option><option>海西州</option><option>银川</option><option>石嘴山</option><option>吴忠</option><option>固原</option><option>中卫</option><option>乌鲁木齐</option><option>克拉玛依</option><option>喀什</option><option>阿克苏</option><option>和田</option><option>吐鲁番</option><option>哈密</option><option>克孜勒苏柯州</option><option>博尔塔拉州</option><option>昌吉州</option><option>巴音郭楞州</option><option>伊犁州</option><option>塔城</option><option>阿勒泰</option><option>香港</option><option>澳门</option><option>台北</option><option>高雄</option><option>台中</option><option>花莲</option><option>基隆</option><option>嘉义</option><option>金门</option><option>连江</option><option>苗栗</option><option>南投</option><option>澎湖</option><option>屏东</option><option>台东</option><option>台南</option><option>桃园</option><option>新竹</option><option>宜兰</option><option>云林</option><option>彰化</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">经营行业<span class="text-danger">*</span> :</label>
                                        <input id="industry" type="text" class="form-control resume" placeholder="Industry">
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">融资情况<span class="text-danger">*</span> :</label>
                                        <div class="form-button">
                                            <div class="registration-form-box">
                                                <select id="company-stage">
                                                    <option value="">Stage...</option>
                                                    <!-- <option value="0">不限</option> -->
                                                    <option value="1">未融资</option>
                                                    <option value="2">天使轮</option>
                                                    <option value="3">A轮</option>
                                                    <option value="4">B轮</option>
                                                    <option value="5">C轮</option>
                                                    <option value="6">D轮</option>
                                                    <option value="7">已上市</option>
                                                    <option value="8">不需要融资</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                                                                                                  
                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">公司规模<span class="text-danger">*</span> :</label>
                                        <div class="form-button">
                                            <div class="registration-form-box">
                                                <select id="company-scale">
                                                    <option value="">Scale...</option>
                                                    <!-- <option value="0">不限</option> -->
                                                    <option value="1">0-20人</option>
                                                    <option value="2">20-99人</option>
                                                    <option value="3">100-499人</option>
                                                    <option value="4">500-999人</option>
                                                    <option value="5">1000-9999人</option>
                                                    <option value="6">10000人以上</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">企业统一信用编码<span class="text-danger">*</span> :</label>
                                        <input id="uniformCreditCode" type="text" class="form-control resume" placeholder="UniformCreditCode">
                                    </div>
                                </div>

                                <div class="col-lg-12">
                                    <div class="form-group app-label">
                                        <label class="text-muted">公司简介<span class="text-danger">*</span> :</label>
                                        <textarea name="introduce" id="introduce" rows="4" class="form-control resume" placeholder="Introduce"></textarea>
                                        <!-- <script>
                                            CKEDITOR.replace('introduce');
                                        </script> -->
                                    </div>
                                </div>
                                
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="row mt-5">
                <div class="col-12">
                    <h5 class="text-dark">附加信息 :</h5>
                </div>

                <div class="col-12 mt-3">
                    <div class="custom-form p-4 border rounded">
                        <form>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">法人代表<span class="text-danger">*</span> :</label>
                                        <input id="corporator" type="text" class="form-control resume" placeholder="Corporator">
                                    </div>
                                </div>
                                

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">注册资金<span class="text-danger">*</span> :</label>
                                        <input id="registeredFund" type="text" class="form-control resume" placeholder="RegisteredFund">
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">成立时间<span class="text-danger">*</span> :</label>
                                        <input id="createTime" type="date" class="form-control resume" placeholder="CreateTime">
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">企业类型<span class="text-danger">*</span> :</label>
                                        <input id="type" type="text" class="form-control resume" placeholder="Type">
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">状态<span class="text-danger">*</span> :</label>
                                        <div class="form-button">
                                            <div class="registration-form-box">
                                                <select id="company-status">
                                                    <option value="">Status...</option>
                                                    <option value="1">开业</option>
                                                    <option value="2">停业</option>                                           
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group app-label">
                                        <label class="text-muted">注册地址<span class="text-danger">*</span> :</label>
                                        <input id="registeredAddress" type="text" class="form-control resume" placeholder="RegisteredAddress">
                                    </div>
                                </div>

                                <div class="col-lg-12">
                                    <div class="form-group app-label">
                                        <label class="text-muted">经营范围<span class="text-danger">*</span> :</label>
                                        <textarea id="scope" name="scope" rows="4" class="form-control resume" placeholder="Scope"></textarea>
                                        <!-- <script>
                                            CKEDITOR.replace('scope');
                                        </script> -->
                                    </div>
                                </div>

                                

                            </div>
                        </form>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-12 mt-4">
                    <input type="submit" id="submit" name="send" onclick="saveCompany()" class="submitBnt btn btn-primary" value="提交">
                </div>
            </div>
        </div>
    </section>
    <!-- CREATE RESUME END -->


    
    <hr>
    <footer class="footer footer-bar">
        
    </footer><!--end footer-->
    <!-- Footer End -->

    <!-- Back to top -->
    <a href="#" class="back-to-top rounded text-center" id="back-to-top"> 
        <i class="mdi mdi-chevron-up d-block"> </i> 
    </a>
    <!-- Back to top -->

    <!-- javascript -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/plugins.js"></script>

    <!-- selectize js -->
    <script src="js/selectize.min.js"></script>

    <script src="js/jquery.nice-select.min.js"></script>

    <script src="js/app.js"></script>

    <script src="js/message.js"></script>

    <script src="js/common.js"></script>

    <script src="js/jquery.params.js"></script>

    <script src="js/notiflix-2.1.2.min.js"></script>

    <script src="js/sweetalert-dev.js"></script>

    

    <script type="text/javascript">
        $(function(){
            loadTopNav();
            loadFootNav();
            setName();
            var user = JSON.parse(localStorage.getItem("userInfo"));
            if (user == null) {
                jump();
            }
            getCompanyInfo();
        });

        function getCompanyInfo() {
            var user = JSON.parse(localStorage.getItem("userInfo"));
            user = getUserInfoById(user.userId);
            var companyNo = user.companyNo;
            console.log(user);
            if (companyNo != null || companyNo == "123") {
                return;
            }
            $.ajax({
                type:"GET",
                async:true,
                url:defaultUrl + "company/getCompanyInfo",
                dataType:"json",
                data:{
                    "companyNo":companyNo
                },
                success:function(data) {
                    var companyEntity = data.data.company;
                    console.log(companyEntity);
                    if (companyEntity != null) {
                        $("#companyNo").val(companyEntity.companyNo);            
                        $("#name").val(companyEntity.name);
                        $("#industry").val(companyEntity.industry);
                        $("#city").val(companyEntity.city);
                        setDefaultSelect("#select-country", companyEntity.city);
                        $("#stage").val(companyEntity.stage);
                        setDefaultSelect("#company-stage", companyEntity.stage);
                        $("#scale").val(companyEntity.scale);
                        setDefaultSelect("#company-scale", companyEntity.scale);
                        $("#introduce").val(companyEntity.introduce);
                        $("#head-image").attr("src", companyEntity.icon);
                        $("#corporator").val(companyEntity.corporator);
                        $("#uniformCreditCode").val(companyEntity.uniformCreditCode);
                        $("#registeredFund").val(companyEntity.registeredFund);
                        $("#createTime").val(companyEntity.createTime);
                        $("#type").val(companyEntity.type);
                        $("#status").val(companyEntity.status);
                        setDefaultSelect("#company-status", getStatusCode(companyEntity.status));
                        $("#registeredAddress").val(companyEntity.registeredAddress);
                        $("#scope").val(companyEntity.scope);
                    }     
                    
                }
            })
        }

        function saveCompany() {
            var user = JSON.parse(localStorage.getItem("userInfo"));
            if (user == null) {
                jump();
            }
            var token = localStorage.getItem("token");
            token = token.substring(1, token.length - 1);
            var name = getValue("name");
            var industry = getValue("industry");
            var city = getSelectText("select-country");
            var stage = getSelectValue("company-stage");
            var scale = getSelectValue("company-scale");
            var uniformCreditCode = getValue("uniformCreditCode");
            var introduce = getValue("introduce");
            var corporator = getValue("corporator");
            var registeredFund  = getValue("registeredFund");
            var createTime = getValue("createTime");
            var type = getValue("type");
            var status = getSelectText("company-status");
            var registeredAddress = getValue("registeredAddress");
            var scope = getValue("scope");
            var icon = "images/jobya.png";
            var companyNo = getValue("companyNo");
            if (getValue("icon") != null) {
                icon = getValue("icon");
            }
            if (name == null || industry == null || city == null || stage == null || scale == null || uniformCreditCode == null
                || introduce == null || corporator == null || registeredFund == null || createTime == null || type == null
                || status == null || registeredAddress == null || scope == null) {
                    getInfoMsg("请输入完整信息");
                    return;
            } 
            
            var company = {
                "company":{
                    "name":name,
                    "industry":industry,
                    "city":city,
                    "stage":stage,
                    "scale":scale,
                    "introduce":introduce,
                    "icon":icon,
                    "uniformCreditCode":uniformCreditCode,
                    "corporator":corporator,
                    "registeredFund":registeredFund,
                    "createTime":createTime,
                    "type":type,
                    "status":status,
                    "registeredAddress":registeredAddress,
                    "scope":scope,
                    "companyNo":companyNo,
                    "creator":user.userId
                }
            }
            console.log(company);
            
            $.ajax({
                url: defaultUrl + "company/saveCompany",
                type: 'POST',
                contentType:"application/json;charset=utf-8",
                dataType:"json",
                headers:{"token":token},
                data:JSON.stringify(company),
                success : function(data) {
                    if (data.code == 200) {
                        Notiflix.Report.Success(
                            '保存成功',
                            ' ',
                            '关闭',
                            function () {
                                updateUserInfo(user.userId);
                                location.reload();
                            }
                        );
                        
                    } else {
                        getFailMsg(data.data);
                    }
                },error :function(data){
                    getFailMsg(data.data);
                }
            });
        }

        
    </script>

</body>
</html>