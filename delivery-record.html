<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Jobya - 候选人名单</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="Themesdesign" />

    <link rel="shortcut icon" href="images/favicon.ico">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">

    <!--Material Icon -->
    <link rel="stylesheet" type="text/css" href="css/materialdesignicons.min.css" />

    <link rel="stylesheet" type="text/css" href="css/fontawesome.css" />

    <link rel="stylesheet" type="text/css" href="css/nice-select.css" />

    <!-- selectize css -->
    <link rel="stylesheet" type="text/css" href="css/selectize.css" />

    <!-- Custom  Css -->
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <link rel="stylesheet" type="text/css" href="css/notiflix-2.1.2.min.css"/>

</head>

<body>
    <!-- Loader -->
    <div id="preloader">
        <div id="status">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
        </div>
    </div>
    <!-- Loader -->

    <!-- Navigation Bar-->
    <header id="topnav" class="defaultscroll scroll-active">
        
    </header><!--end header-->
    <!-- Navbar End -->
    
    <!-- Start home -->
    <section class="bg-half page-next-level"> 
        <div class="bg-overlay"></div>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="text-center text-white">
                        <h4 class="text-uppercase title mb-4">候选人名单</h4>
                        <ul class="page-next d-inline-block mb-0">
                            <li><a href="index.html" class="text-uppercase font-weight-bold">首页</a></li>
                            <!-- <li><a href="#" class="text-uppercase font-weight-bold">Pages</a></li> 
                            <li><a href="#" class="text-uppercase font-weight-bold">Candidates</a></li>  -->
                            <li>
                                <span class="text-uppercase text-white font-weight-bold">候选人名单</span> 
                            </li> 
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container">
        <div class="home-form-position">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="home-registration-form job-list-reg-form bg-light shadow p-4">
                        <form class="registration-form">
                            <div class="row">
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-briefcase"></i>
                                        <input type="text" id="job-name" class="form-control rounded registration-input-box" placeholder="Job keybords...">
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-location-arrow"></i>
                                        <input type="text" id="record-id" class="form-control rounded registration-input-box" placeholder="编号">
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-list-alt"></i>
                                        <select id="select-country" class="demo-default">
                                            <option value="">投递状态</option>
                                            <option value="0">未处理</option>   
                                            <option value="1">初筛通过</option>
                                            <option value="2">初筛未通过</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <input type="button" onclick="findDelivery()" id="submit" name="send" class="submitBnt btn btn-primary btn-block" value="查询">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end home -->

    

    <!-- CANDIDATES LISTING START -->
    <section class="section pt-0">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-2 col-md-2">
                    <div class="left-sidebar">
                        <div class="accordion" id="accordionExample">
                            
                        </div>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="show-results">
                        <div class="float-left">
                            <h5 class="text-dark mb-0 pt-2">找到 <span id="total">0</span>个投递记录</h5>
                            <input type="hidden" value="1" id="pageNum"/>
                        </div>
                        <div class="sort-button text-center float-sm-right">
                            <ul class="list-unstyled mb-0">
                                <!-- <li class="list-inline-item mb-0 mr-3">
                                    <select class="nice-select">
                                        <option data-display="Sort By">Nothing</option>
                                        <option value="1">Web Developer</option>
                                        <option value="2">PHP Developer</option>
                                        <option value="3">Web Designer</option>
                                    </select>
                                </li>

                                <li class="list-inline-item">
                                    <select class="nice-select">
                                        <option data-display="Default">Nothing</option>
                                        <option value="1">Web Developer</option>
                                        <option value="2">PHP Developer</option>
                                        <option value="3">Web Designer</option>
                                    </select>
                                </li> -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-2 col-md-2">
                    <div class="left-sidebar">
                        <div class="accordion" id="accordionExample">
                            
                        </div>
                    </div>
                </div>

                <div class="col-lg-8 col-md-8">
                    <div class="candidates-listing-item" id="delivery-record">
                        <div class="border mt-4 rounded p-3">
                            <div class="row">
                                <div class="col-md-9">
                                    <!-- <div class="float-left mr-4">
                                        <img src="images/employers/img-1.jpg" alt="" class="d-block rounded" height="90">
                                    </div> -->
                                    <div class="candidates-list-desc overflow-hidden job-single-meta  pt-2">
                                        <h5 class="mb-2"><a href="#" class="text-dark">Mary Mainor</a></h5>
                                        <ul class="list-unstyled">
                                            <li class="text-muted"><i class="mdi mdi-account mr-1"></i>Web Developer</li>
                                            <li class="text-muted"><a href="" class="text-muted"><i class="mdi mdi-map-marker mr-1"></i>Scenic Way Atlanta.</a></li>
                                            <li class="text-muted"><i class="mdi mdi-currency-usd mr-1"></i>$700 - $900/month</li>
                                        </ul>
                                        <p class="text-muted mt-1 mb-0">Skills : HTML, CSS, JavaScript, Wordpress, PHP, jQueary.</p>
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="candidates-list-fav-btn text-right">
                                        <div class="fav-icon">
                                            <i class="mdi mdi-heart"></i>
                                        </div>
                                        <div class="candidates-listing-btn mt-4">
                                            <a href="#" class="btn btn-primary-outline btn-sm">View Profile</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="border mt-4 rounded p-3">
                            <div class="row">
                                <div class="col-md-9">
                                    <div class="candidates-list-desc overflow-hidden job-single-meta  pt-2">
                                        <h5 class="mb-2"><a href="#" class="text-dark">Mary Mainor</a></h5>
                                        <ul class="list-unstyled">
                                            <li class="text-muted"><i class="mdi mdi-account mr-1"></i>Web Developer</li>
                                            <li class="text-muted"><a href="" class="text-muted"><i class="mdi mdi-map-marker mr-1"></i>Scenic Way Atlanta.</a></li>
                                            <li class="text-muted"><i class="mdi mdi-currency-usd mr-1"></i>$700 - $900/month</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="candidates-list-fav-btn text-right">
                                        <div class="candidates-listing-btn mt-4">
                                            <a href="#" class="btn btn-primary-outline btn-sm">View Profile</a>
                                        </div>
                                        <div class="candidates-listing-btn mt-4">
                                            <a href="#" class="btn btn-primary-outline btn-sm">View Profile</a>
                                        </div>
                                        <div class="candidates-listing-btn mt-4">
                                            <a href="#" class="btn btn-primary-outline btn-sm">View Profile</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <nav aria-label="Page navigation example">
                        <ul class="pagination job-pagination justify-content-center mb-0 mt-4 pt-2" id="pagination">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                                    <i class="mdi mdi-chevron-double-left"></i>
                                </a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">4</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">
                                    <i class="mdi mdi-chevron-double-right"></i>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </section>
    <!-- CANDIDATES LISTING END -->

    <!-- footer start -->
    <footer class="footer">
        
    </footer>
    <!-- footer end -->
    <hr>
    <footer class="footer footer-bar">
        
    </footer><!--end footer-->
    <!-- Footer End -->

    <!-- Back to top -->
    <a href="#" class="back-to-top rounded text-center" id="back-to-top"> 
        <i class="mdi mdi-chevron-up d-block"> </i> 
    </a>
    <!-- Back to top -->

    <!-- javascript -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/plugins.js"></script>

    <!-- selectize js -->
    <script src="js/selectize.min.js"></script>

    <script src="js/jquery.nice-select.min.js"></script>

    <script src="js/app.js"></script>

    <script src="js/message.js"></script>

    <script src="js/common.js"></script>

    <script src="js/jquery.params.js"></script>

    <script src="js/notiflix-2.1.2.min.js"></script>

    <script>
        $(function(){
            loadTopNav();
            loadFootNav();
            setName();
            var user = JSON.parse(localStorage.getItem("userInfo"));
            if (user == null) {
                jump();
            }
            setDeliveryList();
        })

        function findDelivery() {
            $("#pageNum").val(1);
            setDeliveryList();
        }

        
        
        function setDeliveryList() {
            var data = listDeliveryRecord();
            var deliveryList = data.data;
            $("#delivery-record").empty();
            $("#total").html(data.pagination.total);
            for (var i = 0; i < deliveryList.length; i++) {
                var state = getState(deliveryList[i].state);
                if (deliveryList[i].state == 0) {
                    $("#delivery-record").append('<div class="border mt-4 rounded p-2">'+
                    '<div class="row">'+
                        '<div class="col-md-9">'+
                            '<div class="candidates-list-desc overflow-hidden job-single-meta  pt-2">'+
                                '<h5 class="mb-2"><a href="#" class="text-dark">'+deliveryList[i].jobName+'</a></h5>'+
                                '<ul class="list-unstyled">'+
                                    '<li class="text-muted">投递人：'+deliveryList[i].userName+'</li><br>'+
                                    '<li class="text-muted">投递编号：'+deliveryList[i].recordId+'</li><br>'+
                                    '<li class="text-muted">投递状态：'+getState(deliveryList[i].state)+'</li>'+
                                '</ul>'+
                            '</div>'+
                        '</div>'+
                        '<div class="col-md-3">'+
                            '<div class="candidates-list-fav-btn text-right">'+
                                '<div class="candidates-listing-btn mt-4">'+
                                    '<a href="javascript:viewProfile('+deliveryList[i].sender+','+ deliveryList[i].attachId+')" class="btn btn-primary-outline btn-sm">查看简历</a>'+
                                '</div>'+
                            '</div>'+
                        '</div>'+
                    '</div>'+
                '</div>');
                } else {
                    $("#delivery-record").append('<div class="border mt-4 rounded p-2">'+
                    '<div class="row">'+
                        '<div class="col-md-9">'+
                            '<div class="candidates-list-desc overflow-hidden job-single-meta  pt-2">'+
                                '<h5 class="mb-2"><a href="#" class="text-dark">'+deliveryList[i].jobName+'</a></h5>'+
                                '<ul class="list-unstyled">'+
                                    '<li class="text-muted">投递人：'+deliveryList[i].userName+'</li><br>'+
                                    '<li class="text-muted">投递编号：'+deliveryList[i].recordId+'</li><br>'+
                                    '<li class="text-muted">投递状态：'+getState(deliveryList[i].state)+'</li>'+
                                '</ul>'+
                            '</div>'+
                        '</div>'+
                        '<div class="col-md-3">'+
                            '<div class="candidates-list-fav-btn text-right">'+
                                '<div class="candidates-listing-btn mt-4">'+
                                    '<a href="javascript:viewProfile('+deliveryList[i].sender+','+ deliveryList[i].attachId+')" class="btn btn-primary-outline btn-sm">查看简历</a>'+
                                '</div>'+
                            '</div>'+
                        '</div>'+
                    '</div>'+
                '</div>');
                }
                
            }
            
            generatePaginaionNav(data.pagination);
        }

        function getInfoByPage(pageNum,max) {
            if (pageNum <= 0) {
                Notiflix.Report.Info(
                    '不能再往前了!!!',
                    ' ',
                    '关闭'
                )
                return;
            }
            if (pageNum > max) {
                Notiflix.Report.Info(
                    '已经是最后一页了',
                    ' ',
                    '关闭'
                )
                return;
            }
            $("#pageNum").val(pageNum);
            setDeliveryList();
        }

        function listDeliveryRecord() {
            var jobName = getValue("job-name");
            var recordId = getValue("record-id");
            var state = getSelectValue("select-country");
            var user = JSON.parse(localStorage.getItem("userInfo"));
            var sender = user.userId;
            var deliveryRecord = null;
            $.ajax({
                type:"GET",
                async:false,
                url:defaultUrl + "delivery/listDeliveryRecord",
                dataType:"json",
                data:{
                    "jobName":jobName,
                    "recordId":recordId,
                    "state":state,
                    "sender":sender,
                    "pageNum":getValue("pageNum")
                },
                success:function(data) {
                    deliveryRecord = data;
                }
            })
            return deliveryRecord;
        }
    </script>

</body>
</html>